/*!
 * PSPDFKit for Web 2020.1.3 (https://pspdfkit.com/web)
 * 
 * Copyright (c) 2016-2019 PSPDFKit GmbH. All rights reserved.
 * 
 * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW
 * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.
 * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.
 * This notice may not be removed from this file.
 * 
 * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/
 */
(window.__PSPDFKitChunk=window.__PSPDFKitChunk||[]).push([[64],{773:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(29),i=a.n(o),l=a(14),c=a.n(l),s=a(33),d=a.n(s),u=a(16),p=a.n(u),g=a(21),m=a.n(g),f=a(26),b=a.n(f),v=a(405),h=a(15),y=a(3),P=a(186),w=a(35),I=a(229),x=a(697),k=a(87),N=a(5),E=a(2),S=a(34),O=a(0),D=a(12),C=a.n(D),j=a(17),M=a(406),A=a(51),z=a(101),B=a(173),R=new E.Q({width:h.b,height:h.a}),T=O.createElement(z.a,null),L=function(e){var t=e.styles,r=e.formatMessage;return O.createElement("div",{style:{width:e.width,height:e.height},className:t.importedDocument},O.createElement("div",{className:t.importedDocumentIconCircle},O.createElement(A.a,{src:a(430)})),O.createElement("span",{className:t.importedDocumentInfo},r(H.documentMergedHere)))},F=function(e,t,a,r){var n=e.map(function(e){return{type:"page",page:e,rotation:0,label:e.pageLabel}}),o=function(e){var t=e.dupeOf||e.label,a=0,r=!0,o=!1,i=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;null!=s.dupeOf&&s.dupeOf===t&&null!=s.dupeNumber&&s.dupeNumber>a&&(a=s.dupeNumber)}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return a+1},i=!0,l=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var u=s.value;switch(u.type){case"addPage":var g=void 0;null!=u.afterPageIndex?g=u.afterPageIndex+1:(Object(y.h)(null!=u.beforePageIndex),g=u.beforePageIndex),n=n.insert(g,{type:"newPage",label:a(H.newPage),rotation:0,size:new E.Q({width:u.pageWidth,height:u.pageHeight})});break;case"removePages":var m=u.pageIndexes.map(function(e){return n.get(e)}),f=!0,b=!1,v=void 0;try{for(var h,P=m[Symbol.iterator]();!(f=(h=P.next()).done);f=!0){var w=h.value;Object(y.h)(null!=w);var I=n.indexOf(w);n=n.delete(I)}}catch(e){b=!0,v=e}finally{try{f||null==P.return||P.return()}finally{if(b)throw v}}break;case"rotatePages":var x=!0,k=!1,N=void 0;try{for(var S,O=u.pageIndexes[Symbol.iterator]();!(x=(S=O.next()).done);x=!0){var D=S.value,C=n.get(D);Object(y.h)(null!=C);var j=void 0,M=void 0;Object(y.h)("page"===C.type||"newPage"===C.type);var A=C.rotation;if(M=90===u.rotateBy?270===A?0:A+u.rotateBy:90===A?0:180===A?90:270===A?180:A+u.rotateBy,Object(y.h)(0===M||90===M||180===M||270===M),"page"===C.type)j=p()({},C,{rotation:M});else{if("newPage"!=C.type)throw new y.a("Rotation is not allowed on imported documents");j=p()({},C,{rotation:M})}n=n.set(D,j)}}catch(e){k=!0,N=e}finally{try{x||null==O.return||O.return()}finally{if(k)throw N}}break;case"duplicatePages":var z=u.pageIndexes.map(function(e){return n.get(e)}),B=!0,R=!1,T=void 0;try{for(var L,F=z[Symbol.iterator]();!(B=(L=F.next()).done);B=!0){var _=L.value;Object(y.h)(null!=_),Object(y.h)("page"===_.type);var V=o(_),W=_.dupeOf||_.label,K=n.indexOf(_);n=n.insert(K+1,Object.assign({},_,{label:"".concat(W," (").concat(V,")"),dupeOf:W,dupeNumber:V}))}}catch(e){R=!0,T=e}finally{try{B||null==F.return||F.return()}finally{if(R)throw T}}break;case"movePages":var G=u.pageIndexes[0],Q=void 0;null!=u.beforePageIndex?Q=u.beforePageIndex:(Object(y.h)(null!=u.afterPageIndex),Q=u.afterPageIndex+1);var Y=n.get(G);n=n.delete(G),Object(y.h)(null!=Y),n=n.insert(Q,Y);break;case"importDocument":var q=void 0;null!=u.beforePageIndex?q=u.beforePageIndex:(Object(y.h)(null!=u.afterPageIndex),q=u.afterPageIndex+1);var U=void 0;if("string"==typeof u.document){var J=u.document;Object(y.h)(r.has(J)),U=r.get(J,"Imported Document")}else Object(y.h)("string"==typeof u.document.name),U=u.document.name;n=n.insert(q,{type:"importedDocument",label:U});break;case"keepPages":throw Error("Unknown document operation");default:Object(y.b)(u.type)}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}return n};t.default=Object(I.c)(function(e){var t,r,o=e.onCancel,l=e.pages,s=e.dispatch,u=e.backend,g=e.frameWindow,f=e.intl.formatMessage,I=e.CSS_HACK.styles,x=O.useState(Object(N.b)()),D=b()(x,2),z=D[0],_=(D[1],O.useState(Object(N.a)())),V=b()(_,2),W=V[0],K=V[1],G=O.useState(0),Q=b()(G,2),Y=Q[0],q=Q[1],U=W.slice(0,W.size-Y),J=F(e.pages,U,f,z),X=O.useState(Object(N.g)()),Z=b()(X,2),$=Z[0],ee=Z[1],te=O.useState(!1),ae=b()(te,2),re=ae[0],ne=ae[1],oe=O.useState(!1),ie=b()(oe,2),le=ie[0],ce=ie[1],se=O.useCallback(function(e){K(U.push(e)),q(0)},[U]),de=O.useRef(!0);O.useLayoutEffect(function(){return function(){de.current&&(de.current=!1)}},[]);var ue=O.useCallback(function(){var e=l.get(0),t=e?e.pageSize:R,a={type:"addPage",backgroundColor:E.j.WHITE,pageWidth:t.width,pageHeight:t.height,rotateBy:0};1===$.size?a.afterPageIndex=$.first():a.beforePageIndex=0,se(a),ee($.clear())},[l,$,se]),pe=O.useCallback(function(){se({type:"removePages",pageIndexes:$.toArray()}),ee($.clear())},[se,$]),ge=O.useCallback(function(){se({type:"duplicatePages",pageIndexes:$.toArray()}),ee($.clear())},[se,$]),me=O.useCallback(function(){se({type:"rotatePages",pageIndexes:$.toArray(),rotateBy:270})},[se,$]),fe=O.useCallback(function(){se({type:"rotatePages",pageIndexes:$.toArray(),rotateBy:90})},[se,$]),be=O.useCallback(function(){var e=U,t=!0,a=!1,r=void 0;try{for(var n,o=$.sort()[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;e=e.push({type:"movePages",pageIndexes:[i],beforePageIndex:i-1})}}catch(e){a=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}K(e),q(0),ee(Object(N.g)($.toArray().map(function(e){return e-1})))},[$,U]),ve=O.useCallback(function(){var e=U,t=!0,a=!1,r=void 0;try{for(var n,o=$.sort().reverse()[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;e=e.push({type:"movePages",pageIndexes:[i],afterPageIndex:i})}}catch(e){a=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}K(e),q(0),ee(Object(N.g)($.toArray().map(function(e){return e+1})))},[$,U]),he=O.useCallback(function(){ee($.clear()),q(Y+1)},[$,Y]),ye=O.useCallback(function(){ee($.clear()),q(Y-1)},[$,Y]),Pe=O.useCallback(m()(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},1===$.size?t.afterPageIndex=$.first():t.beforePageIndex=0,(a=document.createElement("input")).type="file",a.accept="application/pdf",a.onclick=function(e){e.target.value=""},a.onchange=function(e){if(0!==e.target.files.length){var a=U,r=!0,n=!1,o=void 0;try{for(var i,l=function(){var e=i.value;return"string"!=typeof e.name||0===e.name.length?{v:void 0}:"application/pdf"!==e.type?(Object(y.l)("The uploaded file must be a PDF."),{v:void 0}):-1!==J.findIndex(function(t){return"importedDocument"===t.type&&t.label===e.name})?{v:void 0}:void(a=a.push(p()({type:"importDocument",treatImportedDocumentAsOnePage:!0,document:e},t)))},c=e.target.files[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=l();if("object"===d()(s))return s.v}}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}K(a),q(0),ee($.clear())}},a.click();case 8:case"end":return e.stop()}},e)})),[$,z,se,U,J]),we=O.useCallback(function(){ee(J.keySeq().toSet())},[J,ee]),Ie=O.useCallback(function(){ee($.clear())},[$,ee]),xe=O.useCallback(function(e){$.has(e)?ee($.delete(e)):ee($.add(e))},[$,ee]),ke=O.useCallback(function(){o()},[o]),Ne=O.useCallback(function(){ne(!0),s(Object(P.a)(U.toArray(),function(){de.current&&ne(!1)},function(e){throw de.current&&ne(!1),e}))},[s,U]),Ee=O.useCallback(m()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,u.exportPDFWithOperations(U.toArray().map(S.q));case 4:t=e.sent,Object(k.c)(t,g),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:return e.prev=11,de.current&&ne(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])})),[u,U,g]),Se=$.size>0&&void 0===$.find(function(e){var t=J.get(e);return Object(y.h)(null!=t),"page"!==t.type&&"newPage"!==t.type}),Oe=$.size>0&&void 0===$.find(function(e){var t=J.get(e);return Object(y.h)(null!=t),"page"!==t.type}),De=!$.isEmpty()&&!$.includes(0),Ce=!$.isEmpty()&&!$.includes(J.size-1),je=Y<W.size,Me=Y>0,Ae=I.toolbar.toolbarButton,ze=O.useMemo(function(){return[{type:"editor/add",onPress:ue,className:Ae,disabled:re,children:f(H.newPage)},{type:"editor/remove",onPress:pe,className:Ae,disabled:0===$.size||$.size===J.size||re,children:f(H.removePage)},{type:"editor/duplicate",onPress:ge,className:Ae,children:f(H.duplicatePage),disabled:!Oe||re},{type:"editor/rotateLeft",onPress:me,className:Ae,children:f(H.rotatePageLeft),disabled:!Se||re},{type:"editor/rotateRight",onPress:fe,className:Ae,children:f(H.rotatePageRight),disabled:!Se||re},{type:"editor/moveLeft",onPress:be,className:I.toolbar.toolbarButton,children:f(H.moveBefore),disabled:!De||re},{type:"editor/moveRight",onPress:ve,className:I.toolbar.toolbarButton,children:f(H.moveAfter),disabled:!Ce||re},{type:"editor/importDocument",onPress:Pe,className:Ae,children:f(H.mergeDocument),disabled:re},{type:"spacer"},{type:"editor/undo",onPress:he,className:I.toolbar.toolbarButton,children:f(j.a.undo),disabled:!je||re},{type:"editor/redo",onPress:ye,className:I.toolbar.toolbarButton,children:f(j.a.redo),disabled:!Me||re},{type:"editor/selectAll",onPress:we,className:Ae,children:f(H.selectAll),disabled:$.size===J.size||re},{type:"editor/selectNone",onPress:Ie,className:Ae,children:f(H.selectNone),disabled:$.isEmpty()||re}]},[ue,Ae,re,f,pe,$,J.size,ge,Oe,me,Se,fe,be,I.toolbar.toolbarButton,De,ve,Ce,Pe,he,je,ye,Me,we,Ie]),Be=O.useState(Number.POSITIVE_INFINITY),Re=b()(Be,2),Te=Re[0],Le=Re[1],Fe=O.useMemo(function(){return Te===Number.POSITIVE_INFINITY?[ze,[]]:[ze.slice(0,Te),ze.slice(Te).filter(function(e){return"spacer"!==e.type}).map(function(e){return{item:p()({},e,{dropdownGroup:"documentEditor"})}})]},[ze,Te]),He=b()(Fe,2),_e=He[0],Ve=He[1],We=O.useState(new E.Q),Ke=b()(We,2),Ge=Ke[0],Qe=Ke[1],Ye=O.useCallback(function(e){Le(Number.POSITIVE_INFINITY),Qe(new E.Q({width:e.width,height:e.height}))},[Qe,Le]),qe=O.useRef(null);O.useLayoutEffect(function(){var e=qe.current;if(e&&0!==Ge.width){var t=e.children;if(t.length!==Te){var a=e.ownerDocument.defaultView.getComputedStyle(e),r=44+(parseInt(a.getPropertyValue("padding-left"))||0)+(parseInt(a.getPropertyValue("padding-right"))||0),n=[].findIndex.call(t,function(e,t){return"spacer"!==ze[t].type&&(r+=e.clientWidth)>Ge.width});Le(-1===n?Number.POSITIVE_INFINITY:n),e.ownerDocument.defaultView.innerWidth>=h.e?ce(!0):ce(!1)}}},[Ge,Te,Le,ze]);var Ue=e.CSS_HACK.components,Je=Ue.ToolbarButtonComponent,Xe=Ue.ToolbarDropdownGroupComponent;return O.createElement("div",{className:C()(I.docEditor,"PSPDFKit-DocumentEditor")},O.createElement("div",{className:I.toolbar.root,style:{flex:0}},O.createElement("div",{ref:qe,className:I.toolbarContainer},_e.map(function(e,t){return"spacer"===e.type?O.createElement("div",{style:{flex:1},key:"spacer-".concat(t)}):O.createElement(Je,i()({},e,{key:e.type}))})),Ve.length>0&&O.createElement(O.Fragment,null,O.createElement("div",{style:{flex:1},key:"spacer-responsive"}),O.createElement(Xe,{icon:{type:"more",size:{width:20,height:20}},items:Ve,discreteDropdown:!0,caretDirection:"down",ItemComponent:function(e){var t=e.item;return e.isSelectedItem?null:O.createElement(Je,i()({},t.item,{key:t.type,className:C()(t.item.className,I.toolbar.dropdownButton)}))}}))),O.createElement("div",{className:I.pagesView},O.createElement(B.a,{onResize:Ye}),O.createElement("div",{className:C()((t={},n()(t,I.pagesGrid,!0),n()(t,I.pagesGridLargeThumbnails,le),t))},O.createElement(M.a,{totalItems:J.size,width:Ge.width,height:Ge.height,itemScale:e.scale,renderItemCallback:function(e,t,a){var r,n=J.get(e);switch(Object(y.h)(null!=n),n.type){case"page":r=O.createElement(v.b,{key:"page-".concat(n.label),page:n.page,size:t,maxSize:a,rotation:n.rotation});break;case"newPage":var o=Object(v.a)(n.size,n.rotation,t,a),i=o.rotatedWidth,l=o.rotatedHeight;r=O.createElement("div",{key:"newPage-".concat(n.label),style:{width:i,height:l}});break;case"importedDocument":var c=Object(v.a)(R,0,t,a),s=c.containerWidth,d=c.containerHeight;r=O.createElement(L,{width:s,height:d,key:"importedDoc-".concat(n.label),styles:I,formatMessage:f});break;default:Object(y.b)(n.type)}return{item:r,label:n.label}},onItemPress:xe,selectedItemIndexes:$,cssPrefix:"PSPDFKit-DocumentEditor"}))),O.createElement("div",{className:I.bottomBar},O.createElement(w.b,{onClick:ke},f(j.a.cancel)),O.createElement("div",{className:C()((r={},n()(r,I.pagesSelectedIndicator,!0),n()(r,I.pagesSelectedIndicatorShown,$.size>0),r))},O.createElement("div",{className:I.pagesSelectedIcon},O.createElement(A.a,{src:a(431)})),f(H.pagesSelected,{arg0:$.size})),O.createElement("div",{className:I.spacer}),re&&T,O.createElement(w.b,{disabled:re,onClick:Ee},f(H.saveAs)),O.createElement(w.b,{primary:!0,disabled:U.isEmpty()||re,onClick:Ne},f(j.a.save))))});var H=Object(x.a)({newPage:{id:"newPage",defaultMessage:"New Page",description:"Add new page"},removePage:{id:"removePage",defaultMessage:"Remove Page",description:"Remove page"},duplicatePage:{id:"duplicatePage",defaultMessage:"Duplicate Page",description:"Duplicate page"},rotatePageLeft:{id:"rotatePageLeft",defaultMessage:"Rotate Page Left",description:"Rotate Page Left"},rotatePageRight:{id:"rotatePageRight",defaultMessage:"Rotate Page Right",description:"Rotate Page Right"},mergeDocument:{id:"mergeDocument",defaultMessage:"Merge Document",description:"Merge Document"},selectAll:{id:"selectAll",defaultMessage:"Select All",description:"Select All Pages"},selectNone:{id:"selectNone",defaultMessage:"Select None",description:"Deselect All Pages"},saveAs:{id:"saveAs",defaultMessage:"Export Modified Document",description:"Save Modified Document Locally"},moveBefore:{id:"moveBefore",defaultMessage:"Move Before",description:"Move page before previous one"},moveAfter:{id:"moveAfter",defaultMessage:"Move After",description:"Move page after next one"},documentMergedHere:{id:"documentMergedHere",defaultMessage:"Document will be merged here",description:"Placeholder for the imported document"},save:{id:"save",defaultMessage:"Apply Modifications",description:"Apply Modifications to the current Document"},pagesSelected:{id:"pagesSelected",defaultMessage:"{arg0, plural,\n      =0 {{arg0} Pages}\n      one {{arg0} Page}\n      two {{arg0} Pages}\n      other {{arg0} Pages}\n    }",description:"Number of pages selected."}})}}]);